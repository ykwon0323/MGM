<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.gam.Free">
  
  <select id="freelist" parameterType="Map" resultType="FreeDto">
  SELECT freeboard_seq,freeboard_group,freeboard_step,freeboard_title,freeboard_writer,freeboard_readcount,
		freeboard_regdate,freeboard_delflag,freeboard_recommender,freeboard_pushnum
		FROM mgm_freeboard ORDER BY freeboard_group DESC,freeboard_step ASC LIMIT #{pagenum},#{contentnum}
  
  </select>
   
    
   <select id="selectTotalPaging" resultType="int">
		SELECT COUNT(*) FROM mgm_freeboard
	</select> 
    
     <insert id="freeinsert" parameterType="FreeDto" >
     insert into mgm_freeboard(freeboard_seq,freeboard_group,freeboard_step,freeboard_depth,freeboard_title,freeboard_contents,freeboard_writer,freeboard_readcount,freeboard_regdate,
            freeboard_delflag,freeboard_recommender,freeboard_pushnum)       
            select case count(*) when 0 then 1 else max(freeboard_seq) + 1 end ,
           (SELECT IFNULL(MAX(freeboard_group) + 1, 1) FROM mgm_freeboard b),0,0,#{freeboard_title},#{freeboard_contents},#{freeboard_writer},0,now(),'N','null',0 from mgm_freeboard
  </insert>
    
    <select id="freedetail" parameterType="int"  resultType="FreeDto">
    SELECT freeboard_seq,freeboard_group,freeboard_step,freeboard_depth,freeboard_title,freeboard_writer,freeboard_readcount,
		freeboard_regdate,freeboard_delflag,freeboard_recommender,freeboard_pushnum
		FROM mgm_freeboard WHERE freeboard_seq = #{seq}
    </select>
    <update id="readcount" parameterType="seq">
    	UPDATE mgm_freeboard SET freeboard_readcount = freeboard_readcount+1 WHERE freeboard_seq=#{seq}
    </update>
  </mapper>